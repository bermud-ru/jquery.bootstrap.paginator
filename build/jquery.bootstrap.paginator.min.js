/**
 * @module jquery.bootstrap.paginator.min.js
 * jQuery плагин bootstrapPaginator
 * @author Андрей Новиков <andrey@novikov.be>
 * @data 14/10/2015
 */

(function(b,l,p){var g=l.document,n={page:1,count:1,ruler:1,reload:!1},m=function(c,a){this.container=b(c);this.settings=b.extend(n,a);this._name="bootstrapPaginator";this.build();this.bind();return c};m.prototype={build:function(){var c=[];if(this.settings.count&&this.settings.page&&this.settings.count>=this.settings.count){var a=this,d=a.settings.ruler<a.settings.count?a.settings.ruler:a.settings.count,e=d<a.settings.count,h=[],k=d;e&&(k+=2);for(var f=Math.round(d/2)+(d&1?0:1),b=0;b<k;b++)0>=a.settings.page+
e-f&&f-2*e<a.settings.count-a.settings.page?h.push(b):a.settings.page-2*e+f>a.settings.count&&f-2*e<a.settings.count-a.settings.page?h.push(a.settings.page-k+b+2*e):f-2*e>=a.settings.count-a.settings.page?h.push(a.settings.count+2*e-k+b):h.push(a.settings.page-f+b);d&&h.map(function(d,b,f){e&&0==b?c.push({content:"\u00ab",shift:-1,css:a.settings.page-1?"laquo":"disabled"}):e&&b==f.length-1?c.push({content:"\u00bb",shift:1,css:a.settings.page+1<a.settings.count?"raquo":"disabled"}):c.push({content:d,
page:d,css:d==a.settings.page?"active":""})})}this.render(c)},render:function(c){var a=this,d=g.createElement("ul");d.className="pagination";c.map(function(e){var c=g.createElement("li");c.className=e.css;var b=g.createElement("a");b.appendChild(g.createTextNode(e.content));if(e.shift){var f=g.createAttribute("data-page");f.value=a.settings.page+e.shift;b.setAttributeNode(f)}else e.page&&(f=g.createAttribute("data-page"),f.value=e.page,b.setAttributeNode(f));c.appendChild(b);d.appendChild(c)});this.container.html(d)},
bind:function(){var c=this;c.container.on("click","li:not(.active, .disabled) a",function(a){a=b(this).data("page");"function"===typeof c.settings.reload&&c.settings.reload.call(this,a);l.dispatchEvent(new CustomEvent("paginator.change",{detail:a}))});l.addEventListener("paginator.change",this.onPagination.bind(this),!1)},onPagination:function(b){var a=b.detail,d=this;d.container.fadeOut(function(b){d.settings.page=a;d.build();d.container.fadeIn()})}};b.fn.bootstrapPaginator=function(c){return this.each(function(){b.data(this,
"plugin_bootstrapPaginator")||b.data(this,"plugin_bootstrapPaginator",new m(this,c))})}})(jQuery,window);